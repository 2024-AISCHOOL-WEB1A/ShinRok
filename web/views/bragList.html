<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>게시물 제목이 들어가면 좋겠네용</title> 
    <script src="https://kit.fontawesome.com/71a327e855.js" crossorigin="anonymous"></script>
    <!-- font awesome 오류 났을때 fas / fab (brand 이미지일 경우) 앞에 추가하여 해결 _버전 오류 -->

    <link rel="stylesheet" href="../public/bragList.css">
</head>

<body>
    <!-- ------------------- 최상단 배너 ----------------------- -->
    <section id="banner">
        <div class="content">
            <header>
                <!-- <h2>오늘의 식물 <br/></h2> -->
                <img class="murukLogo" src="https://jsh-1.s3.ap-northeast-2.amazonaws.com/board/2cfc7479eda4cbc7ffdecc6081f496d6" alt="">
            </header>
            <!-- <ul class="actions">
                <li><a href="#">자세히 보러가기 <i class="fa-solid fa-right-long"></i></a></li>
            </ul> -->
        </div>
    </section>

    <!-- ----------------------------- Body 전체 ------------------------------------------------------------------------------------------------------------------------------ -->
    <form action="/board/bragList" method="post" class="bragList">
        
        <!-- ------------------ 왼쪽 사이드바 ---------------------- -->
        <aside class="leftSidebar">
            <nav>
                <ul>
                    <!-- <li><a href="/plusPost"><button id="postingBtn"><i class="fa-solid fa-pen-to-square"></i> 게시글쓰기</button></a></li> -->
                    <!-- 메인으로 돌아가는 버튼 -->
                    <li><a href="/"><button> HOME</button></a></li>
                    <li>
                        <div class="profile">Profile</div>
                    </li>

                    <li><a href="#">자유게시판</a></li>
                    <li><a href="#">자랑하기</a></li>
                    <li><a href="#">인기글</a></li>
                    <li><a href="#">공지사항</a></li>
                    <li><a href="#">질문게시판</a></li>
                </ul>
            </nav>
        </aside>

        <!-- ---------------------------- 여기부터 자랑페이지 ----------------------------------------- -->
        <div class="board" id="board"></div>
    <div class="pagination" id="pagination"></div>

    <script>
        const itemsPerPage = 6;
        let currentPage = 1;

        // 예제 게시물 데이터
        const posts = [];
        for (let i = 1; i <= 20; i++) {
            posts.push({
                idx: i,
                USER_NICK: `닉네임${i}`,
                BOARD_DATE: `2024-07-25`,
                BOARD_COUNT: i * 10,
                BOARD_TITLE: `제목${i}`,
                BOARD_CONTENT: `내용${i}`,
                BOARD_IMG: `이미지경로${i}.jpg` // 이미지 경로는 예제로 넣었습니다.
            });
        }

        // 게시물 하나의 템플릿 생성 함수
        function createPostTemplate(post, commentCount) {
            return `
                <div class="board-item">
                    <input type="hidden" name="idx" value="${post.idx}">
                    <div class="addImage" style="text-align: center;">
                        <img src="${post.BOARD_IMG}" alt="게시글 이미지" style="max-width: 100%; height: auto;">
                    </div>
                    <div class="board-content">
                        <p>${post.USER_NICK}</p>
                        <p>날짜: ${post.BOARD_DATE}</p>
                        <p>조회수: ${post.BOARD_COUNT}</p>
                        <p><i class="fa-regular fa-comment-dots"></i> 댓글 수: ${commentCount}</p>
                    </div>
                    <h2 id="titleName">제목: ${post.BOARD_TITLE}</h2>
                    <p>내용: ${post.BOARD_CONTENT}</p>
                </div>
            `;
        }

        // 현재 페이지의 게시물 표시
        function displayPage(page) {
            const board = document.getElementById('board');
            board.innerHTML = '';

            const start = (page - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            const pageItems = posts.slice(start, end);

            pageItems.forEach(item => {
                const commentCount = Math.floor(Math.random() * 100); // 예제 댓글 수
                board.innerHTML += createPostTemplate(item, commentCount);
            });

            displayPagination();
        }

        // 페이지네이션 표시
        function displayPagination() {
            const pagination = document.getElementById('pagination');
            pagination.innerHTML = '';

            const totalPages = Math.ceil(posts.length / itemsPerPage);

            const prevButton = document.createElement('button');
            prevButton.textContent = '이전';
            prevButton.onclick = () => {
                if (currentPage > 1) {
                    currentPage--;
                    displayPage(currentPage);
                }
            };
            prevButton.className = currentPage === 1 ? 'disabled' : '';
            pagination.appendChild(prevButton);

            for (let i = 1; i <= totalPages; i++) {
                const button = document.createElement('button');
                button.textContent = i;
                button.onclick = () => {
                    currentPage = i;
                    displayPage(currentPage);
                };
                button.className = i === currentPage ? 'active' : '';
                pagination.appendChild(button);
            }

            const nextButton = document.createElement('button');
            nextButton.textContent = '다음';
            nextButton.onclick = () => {
                if (currentPage < totalPages) {
                    currentPage++;
                    displayPage(currentPage);
                }
            };
            nextButton.className = currentPage === totalPages ? 'disabled' : '';
            pagination.appendChild(nextButton);
        }

        // 초기 페이지 표시
        displayPage(currentPage);
    </script>

        <!-- ----------------- 오른쪽 사이드바(페이지 이동) ----------------- -->
        <aside class="rightSidebar">
            <nav>
                <ul>
                    <li><a href="/diary">Diary</a></li>
                    <li><a href="#">병충해 진단</a></li>
                    <li><a href="#">식물 도감</a></li>
                    <li><a href="#">마이페이지</a></li>
                </ul>
            </nav>
        </aside>
    </form>

    <script src="../assets/js/post.js"></script>
</body>
</html>